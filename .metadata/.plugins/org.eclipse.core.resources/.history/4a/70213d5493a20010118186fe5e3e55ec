#include "stm32f4xx_cus.h"
#include <string.h>

void USART_USER_INIT();
void GPIO_USER_INIT();

USART_HandleTypedef USART_Handle;
GPIO_Handle_TypeDef GPIO_Handle;

int main() {

	return 0;
}

void USART_USER_INIT() {
	USART_Handle.USARTx = USART2;
	USART_Handle.baud_rate = USART_BAUD_115200;
	USART_Handle.data_bits = USART_8_DATA_BITS;
	USART_Handle.stop_bits = USART_1_STOP_BIT;
	USART_Handle.oversampling_mode = USART_OVERSAMPLING_16;
	USART_Handle.parity_control = USART_PARITY_DISABLE;
	USART_Handle.usart_mode = USART_MODE_ASYNC;
	USART_Handle.usart_hardware_flow_control = USART_HW_FLOW_CTRL_NONE;
	USART_INIT(&USART_Handle);
}
void GPIO_USER_INIT() {
	GPIO_Handle.GPIOX = GPIOA;
	GPIO_Handle.alternate_function_select = GPIO_AF7;
	GPIO_Handle.mode = GPIO_MODE_AF;
	GPIO_Handle.output_speed = GPIO_OUTPUT_SPEED_VERY_HIGH;
	GPIO_Handle.output_type = GPIO_OUTPUT_TYPE_PP;
	GPIO_Handle.pull_up_pull_down = GPIO_PUPD_PU;

	//USART2 TX
	GPIO_Handle.pin_number = GPIO_PIN_2; //PA2
	GPIO_INIT(&GPIO_Handle);

	//USART2 RX
	GPIO_Handle.pin_number = GPIO_PIN_3; //PA3
	GPIO_INIT(&GPIO_Handle);

	// This is btn gpio configuration
	GPIO_Handle.pin_number = GPIO_PIN_0;
	GPIO_Handle.mode = GPIO_MODE_INPUT;
	GPIO_Handle.pull_up_pull_down = GPIO_PUPD_NONE;
	GPIO_INIT(&GPIO_Handle);

	//this is led gpio configuration
}
