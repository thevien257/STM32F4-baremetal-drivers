#ifndef INC_STM32F4XX_CUS_UART_H_
#define INC_STM32F4XX_CUS_UART_H_

#include "stm32f4xx_cus.h"
typedef struct {
	volatile uint32_t SR;      // USART Status Register,            offset: 0x00
	volatile uint32_t DR;      // USART Data Register,              offset: 0x04
	volatile uint32_t BRR;     // USART Baud Rate Register,         offset: 0x08
	volatile uint32_t CR1;     // USART Control Register 1,         offset: 0x0C
	volatile uint32_t CR2;     // USART Control Register 2,         offset: 0x10
	volatile uint32_t CR3;     // USART Control Register 3,         offset: 0x14
	volatile uint32_t GTPR;    // USART Guard Time and Prescaler,   offset: 0x18
} USART_TypeDef;

typedef struct {
	USART_TypeDef *USARTx;
	uint8_t oversampling_mode;
	uint8_t word_length;
	uint8_t parity_selection;
	uint8_t stop_bits;
	uint32_t baud_rate;
	uint8_t usart_mode;
	uint8_t usart_hardware_flow_control;
} USART_HandleTypedef;

/* USART/UART Base Addresses */
/* APB2 Bus */
#define USART1_BASE 0x40011000U /* APB2 - 0x40011000 to 0x400113FF */
#define USART6_BASE 0x40011400U /* APB2 - 0x40011400 to 0x400117FF */

/* APB1 Bus */
#define USART2_BASE 0x40004400U /* APB1 - 0x40004400 to 0x400047FF */
#define USART3_BASE 0x40004800U /* APB1 - 0x40004800 to 0x40004BFF */
#define UART4_BASE  0x40004C00U /* APB1 - 0x40004C00 to 0x40004FFF */
#define UART5_BASE  0x40005000U /* APB1 - 0x40005000 to 0x400053FF */
#define UART7_BASE  0x40007800U /* APB1 - 0x40007800 to 0x40007BFF */
#define UART8_BASE  0x40007C00U /* APB1 - 0x40007C00 to 0x40007FFF */

/* USART/UART Peripheral Instances */
#define USART1 ((USART_TypeDef *) USART1_BASE)
#define USART2 ((USART_TypeDef *) USART2_BASE)
#define USART3 ((USART_TypeDef *) USART3_BASE)
#define UART4  ((USART_TypeDef *) UART4_BASE)
#define UART5  ((USART_TypeDef *) UART5_BASE)
#define USART6 ((USART_TypeDef *) USART6_BASE)
#define UART7  ((USART_TypeDef *) UART7_BASE)
#define UART8  ((USART_TypeDef *) UART8_BASE)

// Oversampling
#define USART_OVERSAMPLING_16 0
#define USART_OVERSAMPLING_8 1

// Word length
#define USART_8_DATA_BITS 0
#define USART_9_DATA_BITS 1

// Parity Selection
#define USART_EVEN_PARITY 0
#define USART_ODD_PARITY 1
#endif /* INC_STM32F4XX_CUS_UART_H_ */
