#include <stdio.h>
#include <stdint.h>
#include "stm32f4xx_cus.h"

typedef struct {
	__IO uint32_t MODER; /*!< GPIO port mode register,               Address offset: 0x00 */
	__IO uint32_t OTYPER; /*!< GPIO port output type register,        Address offset: 0x04 */
	__IO uint32_t OSPEEDR; /*!< GPIO port output speed register,       Address offset: 0x08 */
	__IO uint32_t PUPDR; /*!< GPIO port pull-up/pull-down register,  Address offset: 0x0C */
	__IO uint32_t IDR; /*!< GPIO port input data register,         Address offset: 0x10 */
	__IO uint32_t ODR; /*!< GPIO port output data register,        Address offset: 0x14 */
	__IO uint32_t BSRR; /*!< GPIO port bit set/reset register,      Address offset: 0x18 */
	__IO uint32_t LCKR; /*!< GPIO port configuration lock register, Address offset: 0x1C */
	__IO uint32_t AFR[2]; /*!< GPIO alternate function registers,     Address offset: 0x20-0x24 */
/*!< AFR[0] = AFRL (pins 0-7), AFR[1] = AFRH (pins 8-15) */
} GPIO_TypeDef;

typedef struct {

} GPIO_Handle_TypeDef;

// This is pointer type GPIO_TypeDef
#define AHB1_BASE_ADDR 0x40020000
#define GPIO_OFFSET_ADDR 0x400
#define GPIOA (GPIO_TypeDef*)AHB1_BASE_ADDR
#define GPIOB (GPIO_TypeDef*)(AHB1_BASE_ADDR + GPIO_OFFSET_ADDR)
#define GPIOC (GPIO_TypeDef*)(GPIOB + GPIO_OFFSET_ADDR)
#define GPIOD (GPIO_TypeDef*)(GPIOC + GPIO_OFFSET_ADDR)
#define GPIOE (GPIO_TypeDef*)(GPIOD + GPIO_OFFSET_ADDR)
#define GPIOF (GPIO_TypeDef*)(GPIOE + GPIO_OFFSET_ADDR)
#define GPIOG (GPIO_TypeDef*)(GPIOF + GPIO_OFFSET_ADDR)
#define GPIOH (GPIO_TypeDef*)(GPIOG + GPIO_OFFSET_ADDR)
#define GPIOI (GPIO_TypeDef*)(GPIOH + GPIO_OFFSET_ADDR)
#define GPIOJ (GPIO_TypeDef*)(GPIOI + GPIO_OFFSET_ADDR)
#define GPIOK (GPIO_TypeDef*)(GPIOJ + GPIO_OFFSET_ADDR)

// Input/Output Result
#define LOW 0
#define HIGH 1

// GPIO Pins
#define GPIO_Pin_0 0
#define GPIO_Pin_1 1
#define GPIO_Pin_2 2
#define GPIO_Pin_3 3
#define GPIO_Pin_4 4
#define GPIO_Pin_5 5
#define GPIO_Pin_6 6
#define GPIO_Pin_7 7
#define GPIO_Pin_8 8
#define GPIO_Pin_9 9
#define GPIO_Pin_10 10
#define GPIO_Pin_11 11
#define GPIO_Pin_12 12
#define GPIO_Pin_13 13
#define GPIO_Pin_14 14
#define GPIO_Pin_15 15

// Mode
#define GPIO_Input_Mode 0x0
#define GPIO_Output_Mode 0x1
#define GPIO_Alt_Mode 0x2
#define GPIO_Analog_Mode 0x3

// PUPD
#define GPIO_No_PUPD 0x0
#define GPIO_PU 0x1
#define GPIO_PD 0x2

// Function prototypes
void GPIO_INIT(GPIO_TypeDef *gpiox, uint8_t gpio_pins);
uint8_t GPIO_INPUT(GPIO_TypeDef *gpiox, uint8_t gpio_pins);
void GPIO_OUTPUT(GPIO_TypeDef *gpiox, uint8_t gpio_pins, uint8_t val);
